<!-- here is the need 
 for the testing of the thing -->
 <%- include('delete_prompt.ejs') %>

 <div class="flex flex-row justify-evenly  w-full bg-yellow-500">
  <div class="for_image_and_descript 
  w-3/4
  h-full
   bg-rose-500 flex flex-col space-x-2  justify-evenly">
     <div class="image_ bg-blue-500 w-full h-2/4">
      <% if (typeof dis_three_dot !== null && typeof dis_three_dot !== 'undefined') { %>
        <% if (dis_three_dot){ %>
         
       <div class="three_bot  z-50 
        ">
         <span class="w-50 h-40 p-3 
           rounded-full cursor-pointer
           three_dot" id="three_dot">
            <i class="fas fa-ellipsis-v real-three-btn  w-14 h-14 p-4">
            </i>
           </span>
         
            


          
<div class="bg-orange-400
w-fit 
rounded-md 
 text-2xl
  absolute
 p-4 
  hidden
  z-50
 flex-col"
  id="three_bot_form">
   
<span class="edit p-2 rounded-md cursor-pointer hover:bg-slate-100">
   <a id="edit_btn">
       Edit
   </a>
</span>
 <!-- here for the deleting of post -->
  
<span class="delete_btn
 p-2 rounded-md cursor-pointer
  hover:bg-slate-100">
<a>Delete</a>
</span>
 <!--  -->
</div>
 
         </div>
        <% }else{%>
         <div id="three_bot_form"  class=" hidden three_dot">
           <span id="edit_btn"></span>
           </div>
<!-- fake-- -->
<div class="prompt_delete">
 <span class="delete_btn">
 </span>
</div>
        <% } %>
     <% } %>
      <div class="image-Preview
      w-full
      h-full
      m-auto
      rounded-lg
       mt-0
        ">
        <% if (S_Pro.pp.split('.')[1] === "mp4") { %>
          <video src="/<%=S_Pro.pp%>/p" controls></video>
         <% } else{%>

     <img class="
     w-full
     rounded-lg
     h-full
     " src="/<%=S_Pro.pp%>/p" id="rea_deal_of_image" alt="">
     <% } %>
    </div>
    
  </div>
      
      <!-- here it is for the thing of the connect like and othere -->
     <div class="flex flex-row space-x-5 w-full 
     justify-evenly">


      <span>
        <%- include('../../Hope_nugget/connect_btn.ejs') %>
      </span>
<span class="hidden">
<% let date_then  = new Date(S_Pro.dateCreated) %>   
<% let date_now = new Date() %>     
<% let difference_millisec =  date_now - date_then %>     
<% let Number_second  = Math.floor((difference_millisec)/1000) %>     
<% let Number_minute  = Math.floor((difference_millisec)/(1000*60)) %>     
<% let Number_hours  = Math.floor((difference_millisec)/(1000*60*60)) %>     
<% let Number_day  = Math.floor((difference_millisec)/(1000*60*60*24)) %>     
<% let Number_week  = Math.floor((difference_millisec)/(1000*60*60*24*7)) %>     
<% let Number_month  = Math.floor((difference_millisec)/(1000*60*60*24*7*30)) %>     
<% let Number_year  = Math.floor((difference_millisec)/(1000*60*60*24*7*30*365)) %>     
<!-- making use of the  -->

<% let time_passed; %>
</span>

<span
style="grid-area: 1/2/1/3;"
class="time  text-center pt-2 text-2xl font-sans ">
  <% if (Number_second <60) { %>
      <% time_passed = Number_second+" s ago"%>
      <%= time_passed %>
  <% }else if(Number_minute>0 && Number_minute <60){ %>
    <% time_passed = Number_minute+" m ago"%>
    <%= time_passed %>
     <% }else if(Number_hours>0 && Number_hours < 24){%>
    <% time_passed = Number_hours+" h ago"%>
      <%= time_passed %>
       <% }else if(Number_day>0 && Number_day <7){%>
        <% time_passed = Number_day+" day ago"%>
        <%= time_passed %>
          <% }else if(Number_week >0 && Number_week < 6){ %>
        <% time_passed = Number_week+" week ago" %>
        <%= time_passed %>
             <% }else if(Number_month>0&&Number_month <12){ %>
        <% time_passed = Number_month+" month ago"%>
         <%= time_passed %>
               <% }else if(Number_year>0){%>
        <% time_passed = Number_year+" year ago"%>
                     <%= time_passed %>
                 <% } %>
</span>
                  
<span id="like_wrapper" class="flex
 flex-row 
w-fit rounded-md
p-2
 space-x-4
bg-gray-900
text-white
text-xl
  justify-start m-auto">

  <i id='<%=S_Pro.id%>'
    class="fas fa-heart 
     cursor-pointer
      like_btn p-1
       ">
   <span id="Number-<%=S_Pro.id%>"
      class="text-sm">
      <%= S_Pro.Number_likes %>
   </span>


 </i>

      <!-- for the number of viewer -->
      <span id="viewer ">
        <i class="fas fa-eye flex flex-col"></i>
         <!--  the real deal -->
         <small><%= S_Pro._Number_View%></small>
       </span>

    <i class ="
    fas fa-comment  
    text-white
    cursor-pointer
     like_btn p-1
     text-2xl">
       <span id="Another_Comment<%=S_Pro.id%>" 
         class="text-sm"><%= S_Pro._Number_Comment %>
        </span>
    </i>

</span>
</div>
<!-- for the other image there -->
 
<% if (S_Pro._arraypp !== null ) { %>
  <div class="
  m-auto
bg-red-400
 rounded-lg
  p-1
  w-fit
  stack-image 
  flex
   items-center
    justify-center ">

  
   <% if (S_Pro._arraypp.length>1) { %>
      <% S_Pro._arraypp.forEach(obj => { %>
       
            <% Object.entries(obj).forEach(([key,value]) => { %>
          <!--  for the other dispaly of pp -->
          <img
  class=" 
 
 h-12
  w-12
  rounded-full
  p-1" src="/<%=value%>/p" alt="no image" id="one_of_them">
              <% }); %>
      <% }); %>
     <% } %>
</div>
<% } %>
     <!--  for the description  -->
<div class="description">
   
  <div class="description
  m-auto
   flex
    border-3 border-solid
     border-gray-400
      rounded-lg
   flex-col
 h-fit
 bg-white w-full text-black
     text-center  p-0 
     
     ">

       <!-- for the titlt -->
      <span class=" 
      border-solid 
      border-b-3 border-b-white 
       w-4/5
         m-auto 
         font-sans
          text-xl
          font-bold p-0 ">
        <%= S_Pro.protypeName %>
      </span>
         
      <!-- here is the content -->
     <%- S_Pro.discribePrototype %>
      
    </div>
</div>
     </div> 
   
   <div class="comment_section p-0 w-full">
    <div class="comment_mega_wrapper
    flex flex-col
    border-1 border-solid
    bg-gray-700
     w-full
    h-full
    rounded-md">
   
     <!--  for the dispaly -->
     <div class="dispaly_commnet
      w-full
       h-full
        flex
         flex-col
   justify-between
         overflow-auto
       overflow-y-auto
       overflow-x-hidden
        border-2 border-solid
          border-blue-500
           rounded-lg
        p-5 "id="<%=S_Pro.id%>now">
   
   
   
   
   
   
   <!-- here is for the chat system display -->
   <% if (typeof user_comment !== null && typeof user_comment !== 'undefined' ) { %>
   
   <!--  for the each -->
    <% user_comment.forEach(element => { %> 
   <!-- for the display of the user profile -->
   <% if (element._doc.Of_kind ==='text') { %>
   <div class="bg-pink-200 w-fit text-center p-1
   h-fit
   relative 
   m-1
   flex
   flex-col
   rounded-md
   <% if (user.Userhandle === element._doc.currentUser.Userhandle) { %>
   <%="ml-auto"%>
   <% }else{ %>
   <%="mr-auto"%>
      <% } %>
   rounded-bl-3xl">
   <a href=" /<%=element._doc.currentUser.Userhandle%>">
   <span  class="
   userprofile 
   text-xs
   flex
   flex-row
   w-full
   items-start
   "> 
   
   <img
   class="
   w-7
   h-7
   rounded-full
    "
   src="<% if (element._doc.currentUser.userProfile !== ""){ %>userProfile/<%=element._doc.currentUser.userProfile %>
    <% } else{%><%="/Default-Profile.png "%><% } %>"
   >
   <span class="handlename font-bold">
   <%= element._doc.currentUser.Userhandle %>
   <br> 
   </span>
   </span>
   </a>
   
   
              
             <span class="
             text-black
              font-sans
               text-sm
               w-52
                h-fit
                 block
                  
             ">
             <%= element.chat_content %>
           
              <!--  for the output of the userid for the s_Pro -->
              </span>
             <!-- for the like and the dispaly of the 
              comment -->
               <span id="parent_like_dis"  class=" 
                w-fit
                 ml-auto
                rounded-md like_displike "> 
                 <i class=" text-sm 
                 L_D
                 bg-green-400
                  rounded-lg
                  p-1
                 text-white
                 fas fa-thumbs-up
                 cursor-pointer - m-1" id="LIKE_<%=element._doc._id%>">
   
                   <small class="like">
                      <%= element._doc.Number_Like%>
                    </small>
                  </i>
                 <i id="DISLIKE_<%=element._doc._id%>" class="text-sm
                   L_D
                   bg-red-400
                   rounded-lg
                   p-1
                   text-white
                   cursor-pointer 
                   fas fa-thumbs-down m-1">
                  <small class="dislike">
                   <%= element._doc.Number_dislike%>
                  </small>             
                 </i>      
                  
               </span>
                   <!-- here is repaly btn where it is going to be displaying the
                    valiue of the thing under the comment -->
              <span>
                
                     <i class="p-2  
                     fas fa-comments cursor-pointer font-sans text-xl
                reply_btn"
                id="replynow_<%=element._doc._id%>"
                >
                <%= element.each_count %>
              </i>
              </span>
              <!--  here is for the display of the replys 
              so far as this is not been click this is hidden-->
              <div id="reply_<%=element._doc._id %>" class="one_reply 
                flex-col space-y-3 h-fit hidden">
             
                <div class="replyS_ flex flex-col space-y-3"  id="<%=element._doc._id%>">
                   <!-- here is for the sub comment   -->
              <% if (element.reply.length !== null) { %>
                 <% element.reply.forEach(element => { %>
                    <span class="bg-white rounded-lg p-1 w-fit ml-auto">
                     <%= element.content %>
                    </span>
                    </span>
                 <% }) %>
              <% } %>
                </div>
                <!-- for the input of the comment -->
                <div class="reply-area 
                mt-2
               items-stretch
               w-2/3                 
               h-fit
                flex flex-row 
                  text-center m-auto  p-1"> 
                      <span 
                      class="w-full bg-slate-600
                      overflow-none
                      h-full text-white outline-none
                      rounded-md
                      text-xl
                      border-none
                      placeholder-white 
                       p-1  " 
                      type="text" 
                       contenteditable
                        id="reply_content"
                        >
                        </span>
                 
                 
                      <i id="reply_user_btn"  class="fa fa-paper-plane cursor-pointer
                      rounded-md
                       text-xl 
                        text-gray-800
                         w-fit
                         h-fit
                       p-2
                        hover:bg-white
                         duration-200" aria-hidden="true"></i>
          
                     
               </div>
         
             </div>
       
   
               <div id="reply_<%=element._doc._id %>" class="one_reply 
                  flex-col space-y-3 h-fit hidden">
               
                  <div class="replyS_ flex flex-col space-y-3"  id="<%=element._doc._id%>">
                     <!-- here is for the sub comment   -->
               
                  </div>
                  <!-- for the input of the comment -->
                  <div class="reply-area 
                  mt-2
                 items-stretch
                 w-2/3                 
                 h-fit
                  flex flex-row 
                    text-center m-auto  p-1"> 
                        <span 
                        class="w-full bg-slate-600
                        overflow-none
                        h-full text-white outline-none
                        rounded-md
                        text-xl
                        border-none
                        placeholder-white 
                         p-1  " 
                        type="text" 
                         contenteditable
                          id="reply_content"
                          >
                          </span>
                   
                           <!-- for the people -->
                   
                        <i id="reply_user_btn"  class="fa fa-paper-plane cursor-pointer
                        rounded-md
                         text-xl 
                          text-gray-800
                           w-fit
                           h-full
                         p-2
                          hover:bg-white
                           duration-200" aria-hidden="true"></i>
            
                       
                 </div>
           
               </div>
         
         
         
         
             </div>
   <% }else{ %>
      
     <div class="bg-pink-200 w-fit text-center p-1
   h-fit
   relative 
   m-1
   flex
   flex-col
   rounded-md
   <% if (user.Userhandle === element._doc.currentUser.Userhandle) { %>
   <%="ml-auto"%>
   <% }else{ %>
   <%="mr-auto"%>
      <% } %>
   rounded-bl-3xl">
   <img  class="w-14 h-19 rounded-lg" src="/<%=element.chat_content%>/chat_image" alt="">
   </div>
    <% } %>
    <% }) %>
   <% } %>
   <!-- this is for the comment  -->
    
   </div>
      <!-- for send input ifled and the btn -->
    
    
    
    <!-- thios is the text area which is  made up of the thing of the 
     picture inseting 
      the link injection 
      -->
      <div class="texting_area 
         mt-2
        items-stretch
        w-2/3
    
            relative
         flex flex-row 
           text-center m-auto  p-1"> 
            
          
               
               <span 
               class="w-full bg-slate-600
               overflow-none
               file_input
               h-auto text-white outline-none
               rounded-full
               border-none
               placeholder-white first-letter:
                p-3  " 
               type="text" name="chat_conent"
                 id="comment_conent"
                 contenteditable
                 >
   
            </span>
   
                 <label for="image_file">
                  <input type="file"  class="hidden" id="image_file" multiple>
      
       
    <i
    id="king_btn"
     class=" 
    top-1/2
     -left-9
      cursor-pointer
     fas fa-link text-2xl
     transform
      -translate-x-1/2
      -translate-y-1/2
      text-yellow-300
       absolute">
   </i>      
   </label>
   
          
            <span id="comment_user_btn" class="cursor-pointer
             rounded-md
              text-xl 
               w-fit
               h-fit
               text-gray-800
              p-2
               hover:bg-white
                duration-200
                "> 
               <i class="fa fa-paper-plane" aria-hidden="true"></i>
             </span>
              
        </div>
   
       
      
     </div>
       

   </div>
 </div>


 
 <script src="handle_display_image_file.js">
</script>

<!-- for the overlay  -->
<script>


function start_ano(){
document.addEventListener('DOMContentLoaded', function() {
const anno = Annotorious.init({
  image: 'rea_deal_of_image',
  locale: 'en' // Specify the desired language for Annotorious (optional)
});
});
}

start_ano()

function scrol_btn(){
    container_.scrollTop = container_.scrollHeight
    console.log("this action was called")
   }  
window.onload = scrol_btn        
// for the additon of the comment to 
//  a specific part of the system
let array_reply_btn =Array.from(document.querySelectorAll("#reply_user_btn"));

array_reply_btn.forEach(element=>{
element.addEventListener("click",(event)=>{
console.log("one hitted")
// element.firstElementChild
  let parent_thing =  event.target.parentNode.parentNode.firstElementChild;
  //  id of the current comment section 
      let pacti_comment_id =  parent_thing.id
  let parent_thing2 =  event.target.parentNode.firstElementChild.innerText;
  //  console.log(parent_thing2)
    // the content 
     let content = parent_thing2;
      
      //  one single reply
       let one = document.createElement("span")
       one.classList.add("bg-white", "rounded-lg","p-1","w-fit","ml-auto")
        one.innerText = content

        //   thing to be sending
         let id_current_comment = {
           content : content,
            pacticul_comment :pacti_comment_id
         }

    //   then appending it 
     parent_thing.appendChild(one)
      // the place of comment 
      fetch(`/comment_now/all_repaly_for`,{
           method:"POST",
           headers :{ "Content-Type":'application/json'},
            body : JSON.stringify({content : id_current_comment})
        })
   
        let pre =  parseInt(document.getElementById(`replynow_${pacti_comment_id}`).innerText)
          //  setting it         
          document.getElementById(`replynow_${pacti_comment_id}`).innerText = pre+=1
             
         
     event.target.parentNode.firstElementChild.innerText=""
})
})


let scoket = io(); 




// detection that the user is here
//  headaces hmmmm
let parent_like_dis  = Array.from( document.querySelectorAll(".L_D"));


//   elmemnt need 

let add_on = document.getElementById("king_btn");




the_input_file.addEventListener("change",function(event){
scrol_btn();
Preview_file(event.target.files,`<%=S_Pro._id%>_p`,"hope")        
scrol_btn();

}
)

// //  for the file drop down and other
//   let file_drop_btn =  document.getElementById("file_drop_btn");
//    let  file_stage = 
//    document.getElementById("file_stage")
//  file_drop_btn.addEventListener("click",function(){
//      file_stage.classList.toggle("w-64");
//  })


//  here is the thing for the handling of the like 
let like_btn = document.getElementsByClassName("like_btn");      

socket.on("someone_liked",(data)=>{
  //  get the id 
   let pacticular =  document.getElementById(`Number-${data.like_id}`);
    //  then setting the value in there
      pacticular.innerText = data.number_like
})
Array.prototype.forEach.call(like_btn,(element)=>{
// for each we are to make them join a ro
//  here is for the for each of he thing 
element.addEventListener("click",(event)=>{
   let tageted =  event.target.tagName
    console.log(event.target.id)
   

  if(tageted ===  "I"){  // checking if it is like it btn 

    let id_post = event.target.id;
    //  getting the current value of the like in the place
let no_likes = parseInt(document.getElementById(`Number-${id_post}`).innerText.replace(/\s/g,''))



    //  making the fectch require
      fetch(`/setting/u/like_it/?post_id=${id_post}`).then(
         res=>{
             res.json().then(
               outcome =>{
                  // here is for the responce
                 
              if(outcome.result){
  //   we are going to be updating all the 
  let info_like  = { 
     like_id   : id_post,
    number_like :no_likes+=1
  }

   socket.emit("new_like_value",info_like);

   
           
 }else{
//   we are going to be updating all the 
let info_like  = { 
     like_id   : id_post,
    number_like :no_likes+=-1
  }

   socket.emit("new_like_value",info_like);

          }
               }
             )
           
          }
         )

  
  
  
  }
   
})



})
 




// seting up a new connection 
  // input_content
let comment_content = document.getElementById("comment_conent")
//   for the send_btn 
let comment_user_btn = document.getElementById("comment_user_btn");
let now_comment_id;
comment_user_btn.addEventListener("click",()=>{

//  here is show wherther the usrent user is therer

//   for the sending of the info
let content = comment_content.innerText;
if(content !== ""){

//  sending the info
//  here is the case where befoe the 
//  emiting of the comment we are going to be sending it into the btn 
 fetch("/comment_now/one_comment/p",{
     method :"POST",
      headers : {'Content-Type':"application/json"},
      body : JSON.stringify({comment : content,proto_id : '<%=S_Pro._id%>'})
  }).then(
    res =>{ res.json().then(
      outcome =>{
          // then we are going to console_log
           now_comment_id = outcome.id
             //   one_comment_structure
 let structure_content = {
     proto_id : '<%=S_Pro._id%>',
     content  : content,
      id : now_comment_id
 }  
  // checking there is an element haveing athe classname current comment
          let current_replay =document.querySelector(".current_replay");

  //  if(current_replay){
  //    let span_replay = document.createElement("span");

  //     span_replay.innerText = content
  //                 // additoon of styling
  //                 span_replay.classList.add("bg-white", "rounded-lg","p-1","w-fit","ml-auto")
  //    current_replay.appendChild(span_replay)
  //  }
  
scoket.emit("comment_here",structure_content);
        }
    )}
  )
}

})



let container_ = document.getElementById("<%=S_Pro._id%>now");
    // for the automatic scrolling to the btn 

      
   
//   when we do receive the comment
scoket.on(`<%=S_Pro._id%>now`,(data)=>{
console.log("done is here")
//  in here we are listening for all the hit to this id
if(container_){
// for the other rapper
 let  div_one = document.createElement("div")
 let m_type
   if('<%=user._id%>' ==='<%=S_Pro.currentUser.id%>'){
     m_type  = "ml-auto";
  }else{
     m_type = "mr-auto";
  }
   div_one.classList.add("bg-pink-200",
    m_type,
   "text-center","h-fit","w-fit","p-2","m-1","rounded-md","rounded-bl-3xl")

    // here is for the decition of wheather the action is the 
    //   for the user or othere
     
let a_link = document.createElement("a");
a_link.href = "/<%=user.Userhandle%>";






   //  for the other span and other
let span_one = document.createElement("span");
span_one.classList.add
("text-xs",
"flex",
"w-full",
"items-start")
    

// for the image 
let img= document.createElement("img");
 img.classList.add("w-7","h-7","rounded-full")

//  getting the user profile or handle
  let may_be_userprofile = '<%=user.userProfile%>';

    var src;
if(may_be_userprofile === ''){
src = "/Default-Profile.png"
        }else{
           src = `userProfile/${may_be_userprofile}`
        }
// setting the img variable 
      img.src =src


      
       
// creating the span 
let span_  =document.createElement("span");
span_.classList.add("font-semibold")
span_.innerText = '<%= user.Userhandle %>'

       
        span_one.appendChild(img)
       span_one.appendChild(span_)
       a_link.appendChild(span_one); // this is under the atag
       div_one.appendChild(a_link)
       parent_like_dis  = Array.from( document.querySelectorAll(".L_D"));

       //  creating of the holder
let span_single_element = document.createElement("span");
  // adding of cool_thing
    span_single_element.classList.add(
      "text-black",
         "font-sans",
          "text-sm",
          "w-40",
           "h-fit",
        "rounded-md")
        // for the like and this like thing
          let span_wrapper_likes = document.createElement("span")
          // it styling 
            span_wrapper_likes.classList.add( "w-fit","m-auto","rounded-md","like_displike")
        //   for the thums
          let thums_now = document.createElement("i");
          thums_now.id =`LIKE_${data.id}`
          //  it styling 
           thums_now.classList.add(
            "text-sm","bg-green-400",
            "rounded-lg",
            "L_D","fas",
            "p-1",
            "text-white",
            "fa-thumbs-up","cursor-pointer","m-1")
          //   for the thing to represent the number
           let small_rep = document.createElement("small");
            // console.log(data.id);
            
            // for the styling
             small_rep.classList.add("like")
              small_rep.innerText = 0

            //   for the dislike section
              let dislike = document.createElement("i");
               dislike.setAttribute("id",`DISLIKE_${data.id}`)
              //  for it styling
               dislike.classList.add(
            "text-sm","bg-red-400",
            "rounded-lg",
            "L_D","fas",
            "p-1",
            "text-white",
            "fa-thumbs-up","cursor-pointer","m-1")
                // for the small -representation of the number
                 let dislike_number =document.createElement("small");
                  
                  dislike_number.innerText = 0;
                 dislike_number.classList.add("dislike")

                  // here is for like appneding 
                   thums_now.appendChild(small_rep);

                  //   for the dislike
                   dislike.appendChild(dislike_number);

                  //  addition of the two of them 
                   span_wrapper_likes.appendChild(thums_now);
                   span_wrapper_likes.appendChild(dislike);


 
//  ading of the content
 span_single_element.innerText = data.content;
//  if it is there in the dom
   div_one.appendChild(span_single_element);
   div_one.appendChild(span_wrapper_likes);
    
 container_.append(div_one);
 scrol_btn()
 // then clearing of the input_section 
   comment_content.innerText = "";
}
//  there is a use of scoll higher
})










//   for the three bot and othere
let three_bot =  document.querySelector(".three_dot")
//   form the  three_bot form
 let bot_form = document.getElementById("three_bot_form")
//  for the display of the overlay 
let overlay_three_dot = document.querySelector(".overlay");

  // for the display of the other options
three_bot.addEventListener("click",function(){
    



  bot_form.classList.add("flex")
bot_form.classList.toggle("hidden");
overlay_three_dot.classList.toggle("hidden");
})
overlay_three_dot.addEventListener("click",()=>{
console.log("someone hit me")
 if(!bot_form.classList.contains("hidden")){
   bot_form.classList.add("hidden")
    
 }

 if(!p_form.classList.contains("hidden")){
   p_form.classList.add("hidden")
   window.location.replace(window.location.href)

    
 }

 
})
bot_form.addEventListener("click",(event)=>{
//   when the name of the tag is the A tag then we are going to be toggel the 
if(event.target.tagName === "A"){
bot_form.classList.toggle("hidden");
}
})






let edit_btn = document.getElementById("edit_btn")
//  for the tracking wheather we are in the form zone 
let inthere_edtting;
//  thing to change 
let title = document.getElementById("title");

let  real_content ;
let value_previous =[];

edit_btn.addEventListener("click",()=>{
// here there is going to be a redirection to a new page
window.location.href = `/setting/u/edit/?proto_id=<%=S_Pro.id%>`;
})




let real_three = document.getElementById("real-three-btn");






let deletebtn =  document.querySelector(".delete_btn");
let prompt_delete = document.querySelector(".prompt_delete");
//  Now showing it 

 deletebtn.addEventListener("click",()=>{
     prompt_delete.classList.add("flex","transform");
       prompt_delete.classList.toggle("hidden");

    })

      prompt_delete.addEventListener("click",(event)=>{
          let target_action = event.target.innerText
           
           if(target_action === "Yes"  ){
              prompt_delete.classList.toggle("hidden");
             fetch(`/setting/u/delete/`,{
               method : "POST",
               headers : {"Content-Type":"application/json"},
               body : JSON.stringify({proto_id : '<%=S_Pro.id%>'})
             }).then( 
              
               res=> {
                 if(res.redirected){
                   window.location.href = res.url
                 }else{
                  //  for the json thing 
                   console.log(res);
                 }
               }               
             
             )

         }else{
          //   when we are dealing with the other thing of 
          // the the user press the cancel deten
          prompt_delete.classList.toggle("hidden");
           overlay_three_dot.classList.add("hidden")

         }
      })

      
      overlay_three_dot.addEventListener("click",()=>{
 if(!prompt_delete.classList.contains("hidden")){
   prompt_delete.classList.add("hidden")
                    }
                  })


                   



                
                  // <!-- for the handling of the like of comment -->

parent_like_dis.forEach(element =>{
element.addEventListener("click",(event)=>{
let id_of_hitted = event.target.id
 console.log("someone hit")
//  the real deal 
 let deal = id_of_hitted.split("_")[0].replace(/\s/g,'')
 let deal2 = id_of_hitted.split("_")[1].replace(/\s/g,'')
//   here is doing of the fetch to see if it 
//  a ---new like
//  a ---- change of decision o like
//  a ---- rewanting to like again  
if(deal === "LIKE" || deal === "DISLIKE"){
  // getting the need info 
   let mega = {
          action  :id_of_hitted
   }
    fetch(`/comment_now/action_on_comment`,{
       method:"POST",
       headers  :{"Content-Type" :  "application/json"},
        body : JSON.stringify(mega)
    }).then(
       res =>{
           res.json().then(
          done =>{
if (done.result) {

document.getElementById(`LIKE_${deal2}`).innerText =done.like
document.getElementById(`DISLIKE_${deal2}`).innerText =done.dislike

}else{
console.log("there is no action here");
}              }
           )
       }
    )
}
})
})
        

//  this is for the case where the user clike on the 
//   replay of a  comment

let reply_btn = Array.from(document.querySelectorAll(".reply_btn"));
//  addding of the eventlis
reply_btn.forEach(element =>{

element.addEventListener("click",(event)=>{
//  make all that are having the m-auto to go back to thier postion
reply_btn = Array.from(document.querySelectorAll(".reply_btn"));
  reply_btn.forEach(element =>{
     if(element.parentNode.parentNode.classList.contains("m-auto") 
    &&  element.parentNode.parentNode.classList.contains("ml-auto") ){
       element.parentNode.parentNode.classList.remove("m-auto")
       element.parentNode.parentNode.classList.add("ml-auto")
       element.parentNode.parentNode.classList.toggle("w-full")
       

     }else if(element.parentNode.parentNode.classList.contains("m-auto") 
    &&  element.parentNode.parentNode.classList.contains("mr-auto") ){
       element.parentNode.parentNode.classList.remove("m-auto")
       element.parentNode.parentNode.classList.add("mr-auto")
       element.parentNode.parentNode.classList.toggle("w-full")
       

     }
     
  })
    //  for the current element
 let Parent_cu_T = event.target.parentNode.parentNode
//   geting the id
 let id_current_comment = element.id.split("_")[1];
  // makng it come to the center
          element.parentNode.parentNode.classList.toggle("m-auto");
          element.parentNode.parentNode.classList.add("bg-blue-200");
          element.parentNode.parentNode.classList.toggle("h-12");
          element.parentNode.parentNode.classList.add("current_replay");
          element.parentNode.parentNode.classList.toggle("w-full");    
          
          //   showing it corresponding staff
            let it_id = event.target.id.split("_")[1];
            //  find the specific aread
              let specific_area_reply = document.getElementById(`reply_${it_id}`)
                 specific_area_reply.classList.toggle("hidden");
                 element.parentNode.parentNode.classList.remove("w-full")
                 element.parentNode.parentNode.classList.toggle("m-auto")
                    element.parentNode.parentNode.classList.add("w-fit")
                 
                  // for a case where the thing is going to be click agia
                   
                 

                  


   
})
})          

//  for the instane

let one_of_them  = document.querySelectorAll("#one_of_them");
//  when click we are going to be 
//   taking the src value and giving it to be the other

//  for the previouse image
let pre_image = document.querySelector("#rea_deal_of_image");

one_of_them.forEach(element=>{
element.addEventListener("click",(event)=>{
//  for the changing
let src_now = event.target.src;
 pre_image.setAttribute("src",src_now)
})

})


</script>